window.Handler={},map={},session={},window.CaseConnect={},CaseConnect.bookData=null,CaseConnect.tocPath=null,CaseConnect.pageViewedHistory=[],CaseConnect.clientReq=null,CaseConnect.whatsThisShow=!1,insideTouchDevices=!1;var insideStaticPage=!1;CaseConnect.isTocLastViewed=null,CaseConnect.currentChapterId="",CaseConnect.currentChapterTitle="",CaseConnect.currentNavbarTitle="",CaseConnect.currentBookId="",CaseConnect.currentBookIsbn="",CaseConnect.currentUserId="",CaseConnect.currentUserType="",CaseConnect.currentUserRole="",CaseConnect.currentUserRoleId="",CaseConnect.currentPageNumber="",CaseConnect.currentSectionId="",CaseConnect.lastActivityCode="",CaseConnect.lastViewedOutlineId="",CaseConnect.bookName="",CaseConnect.bookType="",CaseConnect.resourceFlag="",CaseConnect.casesFlag="",CaseConnect.barCheckFlag="true",CaseConnect.welcomeCaseBriefInEreader="",CaseConnect.hasPCaseAnnotation="",CaseConnect.outlineTimer=null,CaseConnect.currentClassName="",CaseConnect.currentClassDescription="",CaseConnect.currentSemesterYear="",CaseConnect.currentMeetingTime="",CaseConnect.currentSectionInfo="",CaseConnect.currentClassId="",CaseConnect.currentClassEnrollmentCount="",CaseConnect.rTsNotificationFlag="",CaseConnect.studyModalCasebookFlag="",CaseConnect.studyModalStudyAidFlag="",CaseConnect.readToStudyFirstLo="",CaseConnect.userSuspendedFlag="",CaseConnect.preSetBriefLabelList="",CaseConnect.newsFeedFlag="",CaseConnect.newsFeedTimer=null,CaseConnect.productType=null,CaseConnect.manageConnectionTimer=null,CaseConnect.expiryDateTimer=null,CaseConnect.goToPageTop="",CaseConnect.relatedHighlightPrint="",CaseConnect.relatedBriefPrint="",CaseConnect.currentProductId="",CaseConnect.themisSubjectAreaId="",CaseConnect.themisCurrentSubjectAreaTitle="",CaseConnect.themisQuizAttemptId="",CaseConnect.themisSubjectAreaVOList="",CaseConnect.themisSAenableComparison=!0,CaseConnect.appType="web",CaseConnect.deviceMacId="",CaseConnect.deviceOS="deviceOSUnknown",CaseConnect.deviceType="deviceTypeUnknown",CaseConnect.iPAddress="",CaseConnect.sessionAuthenticationToken="",CaseConnect.bookShelfSetupDisplayMessageFlag="",CaseConnect.navigatingAwayFromNewBookshelf=null,CaseConnect.showOutlineTutorial="",CaseConnect.applicationOverlayTutorialDisplayMessageFlag="",CaseConnect.aspenCode="",CaseConnect.browserName="",CaseConnect.briefShareEmailOrigin="false",CaseConnect.permalinkOrigin="false",CaseConnect.bookListForUser={},CaseConnect.totalPromo=0,CaseConnect.androidIssueKeypad=!1,CaseConnect.themisAttributes=[],window.CaseBookConnect={},CaseConnect.currentPageHtmlLocation="",CaseConnect.outline={},CaseConnect.outline.nodeObject=null,CaseConnect.outline.currentOutlineId=null,CaseConnect.outlineToBeSaved=!1,CaseConnect.outlineTutorialDisplayMessageFlag=null,CaseConnect.firstTimeLoginFlag=null,CaseConnect.studyDashBoardVO={},CaseConnect.questionTypeList=[],CaseConnect.myProgress=!1;var existingUserfirstLoginFirstTime=!1;CaseConnect.classList=[],CaseConnect.fromEnroll=!1;var permalinkUrl="",hashes=window.location.href.slice(window.location.href.indexOf("#")+1).split("&");if("manageConnectionEmailOrigin"==hashes[0]){CaseConnect.briefShareEmailOrigin="true";var checkWindow=localStorage.getItem("manageConnectionEmailOriginQA");null!=checkWindow&&null!=checkWindow&&"true"==checkWindow?window.history.pushState(null,null,window.location.pathname):window.history.pushState(null,null,window.location.pathname+"login")}else CaseConnect.briefShareEmailOrigin="false";var permaOrigin=localStorage.getItem("permaOrigin");if(null!=permaOrigin&&null!=permaOrigin&&"true"==permaOrigin?(CaseConnect.permalinkOrigin="true",permalinkUrl=localStorage.getItem("permalinkUrl")):CaseConnect.permalinkOrigin="false",void 0!==debugMode[properties.env]&&"On"!=debugMode[properties.env]){var console={log:function(){}};window.console=console}var themisUrlData=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),urlVal;if(-1!==themisUrlData[0].indexOf("themis")){getThemisBackToCC(themisUrlData);var comingFromThemis=localStorage.getItem("comingFromThemis");"undefined"!==comingFromThemis&&null!==comingFromThemis&&"true"==comingFromThemis?null==localStorage.getItem("userId")?window.history.pushState(null,null,window.location.pathname+"login"):window.history.pushState(null,null,window.location.pathname):window.history.pushState(null,null,window.location.pathname+"login")}function getThemisBackToCC(e){for(var t,n=e,o=0;o<n.length;o++)t=n[o].split("="),CaseConnect.themisAttributes.push(t[0]),CaseConnect.themisAttributes[t[0]]=t[1];return-1!=window.location.href.indexOf("themisFlag")&&(localStorage.setItem("comingFromThemis","true"),null!=localStorage.getItem("themisAdminlanding")&&null!=localStorage.getItem("themisAdminlanding")&&("true"==localStorage.getItem("themisAdminlanding")?themisAdminlanding=!0:themisAdminlanding=!1)),CaseConnect.themisAttributes}function disableLoginRegister(){$("#book-access-code").contextmenu(function(e){}),$("#book-access-code").bind("keyup focus",function(e){"Enter your access code here."!==this.value&&""!==this.value||(this.placeholder="",this.value="",$(this).removeClass("empty-placeholder")),"focus"!==e.type&&($(".access-code-error").html(""),$(".button-cover-home").css("display","inline-block"),$("#buttonLogin").css("display","none"),$("#buttonRegister").css("display","none"),""!==$(this).val()&&($(".button-cover-home").css("display","none"),$("#buttonLogin").css("display","inline-block"),$("#buttonRegister").css("display","inline-block"),13!=e.which&&13!=e.keyCode||$("#buttonRegister").trigger("click")))}),$("#buttonRegister").bind("keyup focus",function(e){null!==localStorage.getItem("userId")?(alertMessagesModal("You are already logged into CasebookConnect."),$("#book-access-code").val(""),$(".button-cover-home").css("display","inline-block"),$("#buttonLogin").css("display","none"),$("#buttonRegister").css("display","none")):""!==$("#book-access-code").val()&&($(".button-cover-home").css("display","none"),$("#buttonLogin").css("display","inline-block"),$("#buttonRegister").css("display","inline-block"),13!=e.which&&13!=e.keyCode||$("#buttonRegister").trigger("click"))}),$("#book-access-code").blur(function(){this.placeholder="Enter your access code here.",""===this.value&&($(this).addClass("empty-placeholder"),this.value="Enter your access code here."),$("#disabled-button").addClass("button-cover-home")}),$("#book-access-code").on("input paste",function(e){"Enter your access code here."!==this.value&&""!==this.value||(this.placeholder="",this.value="",$(this).removeClass("empty-placeholder")),"focus"!==e.type&&($(".access-code-error").html(""),$(".button-cover-home").css("display","inline-block"),$("#buttonLogin").css("display","none"),$("#buttonRegister").css("display","none"),""!==$(this).val()&&($(".button-cover-home").css("display","none"),$("#buttonLogin").css("display","inline-block"),$("#buttonRegister").css("display","inline-block")))})}function fetchSessionVOItems(){CaseConnect.appType="web",-1!=navigator.userAgent.indexOf("Windows NT 6.2")?(CaseConnect.deviceOS="Windows 8",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 6.1")?(CaseConnect.deviceOS="Windows 7",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 6.0")?(CaseConnect.deviceOS="Windows Vista",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 5.1")?(CaseConnect.deviceOS="Windows XP",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 5.0")?(CaseConnect.deviceOS="Windows 2000",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 6.3")?(CaseConnect.deviceOS="Windows 2012",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 10.0")?(CaseConnect.deviceOS="Windows 10",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Macintosh")?(CaseConnect.deviceOS="Mac OS X",CaseConnect.deviceType="Mac Desktop"):-1!=navigator.userAgent.indexOf("iPad")?(CaseConnect.deviceOS="iOS",CaseConnect.deviceType="iPad"):-1!=navigator.userAgent.indexOf("iPhone")?(CaseConnect.deviceOS="iOS",CaseConnect.deviceType="iPhone"):-1!=navigator.userAgent.indexOf("Android")?(CaseConnect.deviceOS="Android",CaseConnect.deviceType="Android Tablet"):-1!=navigator.userAgent.indexOf("X11")?CaseConnect.deviceOS="UNIX":-1!=navigator.userAgent.indexOf("Linux")?CaseConnect.deviceOS="Linux":CaseConnect.deviceOS=navigator.userAgent,-1!=navigator.userAgent.indexOf("Firefox")?CaseConnect.browserName="Firefox":-1!=navigator.userAgent.indexOf("Chrome")?CaseConnect.browserName="Chrome":-1!==navigator.userAgent.indexOf("Safari/")&&-1!==navigator.userAgent.indexOf("Windows")?CaseConnect.browserName="Safari-Windows":-1!=navigator.userAgent.indexOf("Safari")?CaseConnect.browserName="Safari":(CaseConnect.browserName="Internet Explorer",map.isIE9=9==parseInt(navigator.userAgent.split("MSIE")[1])),session.deviceOS=CaseConnect.deviceOS,session.deviceType=CaseConnect.deviceType,session.browserName=CaseConnect.browserName,session.appType=CaseConnect.appType,session.deviceMacId="",session.keepMeLoggedInFlag=localStorage.getItem("keepLoggedIn")?"true":"false",Utility.saveSessionVO()}function fetchSessionVOItemsForEreaderAndOutline(){CaseConnect.appType="web",-1!=navigator.userAgent.indexOf("Windows NT 6.2")?(CaseConnect.deviceOS="Windows 8",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 6.1")?(CaseConnect.deviceOS="Windows 7",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 6.0")?(CaseConnect.deviceOS="Windows Vista",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 5.1")?(CaseConnect.deviceOS="Windows XP",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 5.0")?(CaseConnect.deviceOS="Windows 2000",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 6.3")?(CaseConnect.deviceOS="Windows 2012",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Windows NT 10.0")?(CaseConnect.deviceOS="Windows 10",CaseConnect.deviceType="Desktop"):-1!=navigator.userAgent.indexOf("Macintosh")?(CaseConnect.deviceOS="Mac OS X",CaseConnect.deviceType="Mac Desktop"):-1!=navigator.userAgent.indexOf("iPad")?(CaseConnect.deviceOS="iOS",CaseConnect.deviceType="iPad"):-1!=navigator.userAgent.indexOf("iPhone")?(CaseConnect.deviceOS="iOS",CaseConnect.deviceType="iPhone"):-1!=navigator.userAgent.indexOf("Android")?(CaseConnect.deviceOS="Android",CaseConnect.deviceType="Android Tablet"):-1!=navigator.userAgent.indexOf("X11")?CaseConnect.deviceOS="UNIX":-1!=navigator.userAgent.indexOf("Linux")?CaseConnect.deviceOS="Linux":CaseConnect.deviceOS=navigator.userAgent,-1!=navigator.userAgent.indexOf("Firefox")?CaseConnect.browserName="Firefox":-1!=navigator.userAgent.indexOf("Chrome")?CaseConnect.browserName="Chrome":-1!==navigator.userAgent.indexOf("Safari/")&&-1!==navigator.userAgent.indexOf("Windows")?CaseConnect.browserName="Safari-Windows":-1!=navigator.userAgent.indexOf("Safari")?CaseConnect.browserName="Safari":(CaseConnect.browserName="Internet Explorer",map.isIE9=9==parseInt(navigator.userAgent.split("MSIE")[1])),CaseConnect.keepMeLoggedInFlag=localStorage.getItem("keepLoggedIn")?"true":"false"}function loadStaticPages(e){var t=localStorage.getItem("rememberMe"),n="true"==Utility.getCookie("sameSession");Utility.hideSpinner(),insideStaticPage=!0;var o=location.href.split("?"),i=(location.href.split("?")[0],"");if(o.length>1&&(1==o[o.length-1].split("&").length?"aspenid"==o[o.length-1].split("=")[0]&&(i=o[o.length-1].split("=")[1]):"aspenid"==o[o.length-1].split("&")[0].split("=")[0]&&(i=o[o.length-1].split("&")[0].split("=")[1]),"multiuserLogin"==i&&(i=""),localStorage.setItem("userEmailFromQueryString",i)),localStorage.getItem("userId")&&("true"==t||n)){$(".statusBar").show();var s=localStorage.getItem("firstName");$(".welcome").html("Welcome "+s),$(".loginLink").hide(),$("#header-wrapper").show(),$(".staticpage-loggedout").css("display","none"),$(".header-mobile-view-small").css("display","block"),$(".header-mobile-view-wide").css("display","none"),$(".ereader-visible").css("display","block"),$(".hr-rule-div").hide(),Handler.login.checkTopBottomBarsForLogin(),$(".bookshelflink").show(),$(".tutoriallink").show(),$(window).width()>768&&(insideStaticPage||($(".cc-container-base").css({"margin-left":"20px","margin-right":"60px"}),$("#header .cc-container-base").css({"margin-left":"20px","margin-right":"60px"}))),$("#bookshelf-nav-menu-mobile").modal("hide"),addBookshelfLinkTOLogo(),$(window).trigger("resize"),-1!=e.indexOf("login")&&(window.location=properties.ui_domain),"catalog"==e&&Handler.click.catalog()}if(localStorage.getItem("userId")||CaseConnect.currentUserId)sessionTimeOut();else{if(-1!=e.indexOf("login"))map.wk_conatiner.load("continueLogin.html?v26576",function(){$(".loginLink").hide(),$(".hr-rule-div").hide();var e=location.href.split("?")[1];history.pushState({page:"login"},"Casebook Connect | Legal Education from Wolters Kluwer",location.href.split("?")[0]),i&&i===localStorage.getItem("userEmailFromQueryString")?$("#login_email").val(i):localStorage.getItem("userEmailFromQueryString")&&($("#login_email").val(localStorage.getItem("userEmailFromQueryString")),i=localStorage.getItem("userEmailFromQueryString"),localStorage.setItem("userEmailFromQueryString","")),Handler.login.checkTopBottomBarsForLogin(),void 0!==map.bookAccessCode&&delete map.bookAccessCode,void 0!==localStorage.bookAccessCode&&localStorage.removeItem("bookAccessCode"),$("#login_email").val(""),$("#login_email").focus(),$(".login-blk").show(),$(".reset-login-blk").hide(),$(".static-page-bar").show(),$(".login-remember-label").show(),"ft"==e&&localStorage.setItem("freeTrialLogin","true")});else{$(".loginLink").show();$(window).width();"catalog"==e?(Handler.click.catalog(),(localStorage.getItem("userId")||CaseConnect.currentUserId)&&sessionTimeOut()):"continueLogin"==e&&map.wk_conatiner.load("login.html?v17005",function(){$(".loginLink").hide(),$(".hr-rule-div").hide(),history.pushState({page:"login"},"Casebook Connect | Legal Education from Wolters Kluwer",properties.ui_domain+"login"),$("#login_email").val(i),Handler.login.checkTopBottomBarsForLogin(),void 0!==map.bookAccessCode&&delete map.bookAccessCode,void 0!==localStorage.bookAccessCode&&localStorage.removeItem("bookAccessCode")})}$(".statusBar").hide(),$(".staticpage-loggedout").css("display","block"),$(".ereader-visible").css("display","none"),removeBookshelfLinkTOLogo()}}$(document).ready(function(){$(".copyright-year").html((new Date).getFullYear());var arr=["about.html","terms.html","privacy.html","press.html","learnmore.html","optOutSuccess.html","catalog.html","faculty.html","businesslaw.html"];map["loading-spinner"]=$("#page-loading-spinner"),map["content-wrapper"]=$("#content-wrapper"),Utility.getSessionVO(),map.wk_conatiner=$("#wk_content"),map.overlay=$(".popover-box-wrapper"),$.device=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),insideTouchDevices=$.device,disableLoginRegister();var parts=location.href.split("/");if("activate-FBuser"==parts[parts.length-1])Utility.showSpinner(),map.isIE9?(localStorage.setItem("requestedPage","thankFBRegistration.html"),localStorage.setItem("activateFBuser",!0),window.location=properties.ui_domain):map.wk_conatiner.load("thankFBRegistration.html");else if("createPassword.html"==parts[parts.length-1].split("?")[0])map.wk_conatiner.load(parts[parts.length-1]);else if(-1!=parts[parts.length-1].indexOf("continueLogin.html?v26576"))void 0!==localStorage.bookAccessCode&&(map.bookAccessCode=localStorage.bookAccessCode),map.isIE9?(localStorage.setItem("requestedPage","continueLogin.html?v26576"),window.location=properties.ui_domain):(window.history.pushState(null,null,properties.ui_domain),map.wk_conatiner.load("continueLogin.html?v26576",function(){$("#login_email").val(""),$("#login_email").focus(),$(".login-blk").show(),$(".reset-login-blk").hide(),$(".static-page-bar").show(),$(".login-remember-label").show(),Utility.hideSpinner(),Utility.getAnonymousSessionAuthToken()}));else if("resetPass.html"==parts[parts.length-1])map.isIE9?(localStorage.setItem("requestedPage","resetPass.html"),window.location=properties.ui_domain):window.history.pushState(null,null,properties.ui_domain),map.wk_conatiner.load("resetPass.html?v5",function(){$(".loginLink").show(),$("#reset-pass-btn").show(),$("#complete-reg-btn").hide(),$(".reset-additional-info").show(),$("#reset-password-heading h1").html("Reset Password?")});else if("firstTimeUser.html"==parts[parts.length-1].split("?")[0])map.isIE9?(localStorage.setItem("requestedPage","firstTimeUser.html"),window.location=properties.ui_domain):window.history.pushState(null,null,properties.ui_domain),map.wk_conatiner.load("resetPass.html?v6",function(){$(".loginLink").show(),$("#reset-pass-btn").hide(),$("#complete-reg-btn").show(),$(".reset-additional-info").hide(),$("#reset-password-heading h1").html("First Time User?"),$("#reset-pass-btn").remove(),$("#reset-password-email-field").val("")});else if($.inArray(parts[parts.length-1],arr)>-1);else if(void 0!==localStorage.requestedPage)map.wk_conatiner.load(localStorage.requestedPage,function(){"resetPass.html"==localStorage.requestedPage?($(".loginLink").show(),$("#reset-pass-btn").show(),$("#complete-reg-btn").hide(),$(".reset-additional-info").show(),$("#reset-password-heading h1").html("Reset Password?")):"firstTimeUser.html"==localStorage.requestedPage&&($(".loginLink").show(),$("#reset-pass-btn").hide(),$("#complete-reg-btn").show(),$(".reset-additional-info").hide(),$("#reset-password-heading h1").html("First Time User?"),$("#reset-pass-btn").remove()),localStorage.removeItem("requestedPage")});else{Utility.showSpinner();var rememberMe=localStorage.getItem("rememberMe"),sameSession="true"==Utility.getCookie("sameSession");if(""!=parts[parts.length-1]&&-1==parts[parts.length-1].indexOf("index.html")&&-1==parts[parts.length-1].indexOf("#"))"true"==rememberMe||sameSession||localStorage.getItem("userId")&&(localStorage.clear(),Utility.getSessionVO()),Utility.getLoginState(),loadStaticPages(parts[parts.length-1].split("?")[0]);else if(localStorage.getItem("userId")&&("true"==rememberMe||sameSession)){Utility.getLoginState();var request={data:{}};if("true"==localStorage.getItem("InsideClasInsights")){var e=0;getClassDetails(e),localStorage.setItem("InsideClasInsights",!1)}else if("true"==CaseConnect.briefShareEmailOrigin)loadManageConnectionFromEmailLogin();else if(comingFromThemis&&0!==CaseConnect.themisAttributes.length)if(localStorage.getItem("userId")===CaseConnect.themisAttributes.userId){CaseConnect.themisSubjectAreaId=CaseConnect.themisAttributes.themisSAId,CaseConnect.currentProductId=CaseConnect.themisAttributes.themisProductId,localStorage.setItem("currentProductId",CaseConnect.currentProductId),Utility.showSpinner(),addBookshelfLinkTOLogo(),Handler.login.updateStatusBar();var handler="themisBarProduct",request={},reqData={};request.url="/manageThemis/getThemisSAByProductId",request.url=properties[properties.env]+request.url,request.method="POST",request.handler=eval("Handler."+handler),request.data=reqData,request.handler.request.apply(null,[request]),Utility.fireRequest(request),adjustLeftNavHeight()}else Handler.click.logout(),window.history.pushState(null,null,window.location.pathname+"login");else{Handler.refresh.request(request);var url=properties[properties.env]+"/activityTrackingService/getLastActivityDetail",request={method:"POST",url:url,data:request.data,handler:Handler.refresh,target:null};Utility.fireRequest(request),(localStorage.getItem("userId")||CaseConnect.currentUserId)&&sessionTimeOut()}}else window.history.pushState&&window.history.pushState({page:"home"},null,properties.ui_domain),map.wk_conatiner[0].children[0].style.display="block",Utility.hideSpinner(),localStorage.getItem("errorMessg")&&(alertMessagesModal(localStorage.getItem("errorMessg")),localStorage.removeItem("errorMessg")),localStorage.getItem("userId")&&(localStorage.clear(),Utility.getSessionVO());$(".copyright-year").html((new Date).getFullYear())}$(document).on("click touchstart",function(event){if(null!=event.target.getAttribute("data-handler")){"true"===localStorage.getItem("InsideClasInsights")&&(myProgressList=!1),localStorage.setItem("InsideClasInsights",!1),"click.outline"===event.target.getAttribute("data-handler")&&(highlightPopoverVisible=!1,addBriefPopoverShown=!1,clickedInsidePcaseForAnnot=!1,alertMessageModalAppears=!0,$("#"+selectedNoteId).popover("hide"));var ele=event.target;"radio"!=ele.type&&event.preventDefault();var handler=ele.getAttribute("data-handler"),action=ele.getAttribute("data-action");if(null==action){var handler=eval("Handler."+handler);handler.apply(ele,[event])}else{var windowWidth=$(window).width();"/bookShelfRetrivalService/getBookList "==action||null==localStorage.getItem("userId")?($("#bookshelflink").hide(),$(".tutoriallink").hide()):($("#bookshelflink").show(),$(".tutoriallink").show(),windowWidth>768&&($(".cc-container-base").css({"margin-left":"20px","margin-right":"60px"}),$("#header .cc-container-base").css({"margin-left":"20px","margin-right":"60px"})),$("#bookshelf-nav-menu-mobile").modal("hide")),Utility.showSpinner();var request={},data={};request.url=action,request.url=properties[properties.env]+request.url,request.method=ele.getAttribute("data-method")||"POST",request.handler=eval("Handler."+handler);var $form=$(ele.form),$ele=$(event.target);if(null!=typeof $form){var fields=$form.serializeArray();jQuery.each(fields,function(e,t){data[t.name]=t.value})}request.data=data,$ele.form=$form,request.handler.request.apply($ele,[request]),request.target=$ele,Utility.fireRequest(request)}}if($(".popover-box-wrapper").click(function(){$("[rel=popover]").popover("hide"),$(".popover").hide(),map.overlay.fadeOut(100),event.stopPropagation()}),$("#whats-this").each(function(){$(this).is(event.target)||0!==$(this).has(event.target).length||0!==$(".popover").has(event.target).length||($("#whats-this").popover("hide"),map.overlay.fadeOut(200),map.overlay.css("opacity","0.7"),CaseConnect.whatsThisShow=!1)}),$("#home-innocence-project-message").on("hidden.bs.modal",function(e){setTimeout(function(){$(".innocence-project-link").focus()},30)}),$("#home-innocence-project-message2").on("hidden.bs.modal",function(e){setTimeout(function(){$(".innocence-learn-link").focus()},30)}),$("#generic-message-dialog").on("hidden.bs.modal",function(e){setTimeout(function(){$(".btn-custom-newstud").focus()},30)}),$("#error-message-dialog").on("hidden.bs.modal",function(e){setTimeout(function(){$(".btn-custom-newstud").focus()},30)}),$("#outline-notes-menu-mobile").on("hidden.bs.modal",function(e){setTimeout(function(){$(".outline-menu-trigger-btn").parent().focus()},30)}),$("#outline-notes-menu-mobile").on("shown.bs.modal",function(e){setTimeout(function(){$(".outline-menu-trigger-btn").parent().focus()},30)}),$("#outline-nav-menu-mobile").on("hidden.bs.modal",function(e){setTimeout(function(){$("button.outline-nav-mobile-display-btn").focus()},30)}),$("#highlight-existing-error-lightbox").on("shown.bs.modal",function(){document.activeElement.blur(),$(".annotation-error-close-popover").focus()}),$("#highlight-existing-error-lightbox").on("hidden.bs.modal",function(e){setTimeout(function(){$("button")?$("button").focus():$("a")?$("a").focus():$("button")||$("a")||document.focus()},30)}),$("#study-chapter").each(function(){$(this).is(event.target)||0!==$(this).has(event.target).length||0!==$(".popover").has(event.target).length||($("#study-chapter").popover("hide"),map.overlay.fadeOut(200),map.overlay.css("opacity","0.7"),setTimeout(function(){"block"===$(".studychapter-custom-popover").css("display")?$(".study-chapter-list-popover").find(".toggle-up-down").addClass("glyphicon-menu-up").removeClass("glyphicon-menu-down"):$(".study-chapter-list-popover").find(".toggle-up-down").addClass("glyphicon-menu-down").removeClass("glyphicon-menu-up")},300))}),$("#study-chapter-mobile").each(function(){$(this).is(event.target)||0!==$(this).has(event.target).length||0!==$(".popover").has(event.target).length||($("#study-chapter-mobile").popover("hide"),map.overlay.fadeOut(200),map.overlay.css("opacity","0.7"),setTimeout(function(){"block"===$(".studychapter-custom-popover").css("display")?$(".study-chapter-list-popover").find(".toggle-up-down").addClass("glyphicon-menu-up").removeClass("glyphicon-menu-down"):$(".study-chapter-list-popover").find(".toggle-up-down").addClass("glyphicon-menu-down").removeClass("glyphicon-menu-up")},300))}),$("#class-code-info-button-faculty").each(function(){$(this).is(event.target)||0!==$(this).has(event.target).length||0!==$(".popover").has(event.target).length||$("#class-code-info-button-faculty").popover("hide")}),insideThemis||insideThemisAdmin){currentInfoIconId=$(".themis-popover-wrapper").attr("infoIcon"),currentSkillElem="";var findSkillElem=$(".popover-content .faculty-class-code-tooltip-text").attr("elem");"foundationalConcepts"===findSkillElem&&(currentSkillElem="foundationalConcepts"),"implementation"===findSkillElem&&(currentSkillElem="implementation"),"problemSolving"===findSkillElem&&(currentSkillElem="problemSolving"),"legalReasoning"===findSkillElem&&(currentSkillElem="legalReasoning"),insideThemis&&$("#themisStudQuizzes").each(function(){$(this).is(event.target)||0!==$(this).has(event.target).length||0!==$(".popover").has(event.target).length||event.target.getAttribute("elem")!==currentSkillElem&&$("#themisStudQuizzes").popover("hide")}),insideThemisAdmin&&($("#themisAdminQuizzes").each(function(){$(this).is(event.target)||0!==$(this).has(event.target).length||0!==$(".popover").has(event.target).length||event.target.getAttribute("elem")!==currentSkillElem&&$("#themisAdminQuizzes").popover("hide")}),$("#themisAdminCourses").each(function(){$(this).is(event.target)||0!==$(this).has(event.target).length||0!==$(".popover").has(event.target).length||event.target.getAttribute("elem")!==currentSkillElem&&$("a#themisAdminCourses").popover("hide")})),$("#themis-content-info-icon_"+currentInfoIconId).each(function(){$(this).is(event.target)||0!==$(this).has(event.target).length||0!==$(".popover").has(event.target).length||($("#themis-content-info-icon_"+currentInfoIconId).popover("hide"),currentInfoIconId="")}),$('.quiz-details-title-elem[elem="'+currentSkillElem+'"]').each(function(){$(this).is(event.target)||0!==$(this).has(event.target).length||0!==$(".popover").has(event.target).length||event.target.getAttribute("elem")===currentSkillElem||$(".quiz-details-title-elem[elem]").popover("hide")})}}),whatsThisPopover(),practicePackWhatsThisPopover(),window.onpopstate=function(e){if(e.state)switch(e.state.page){case"faculty":case"terms":case"privacy":case"about":case"learnmore":case"catalog":case"press":case"optOutSuccess":loadStaticPages(e.state.page);break;case"home":case"continueLogin":window.location=properties.ui_domain;break;case"login":localStorage.getItem("userId")?window.location=properties.ui_domain:loadStaticPages(e.state.page);break;default:window.location=properties.ui_domain}}}),Utility={fireRequest:function(e){"Internet Explorer"===CaseConnect.browserName&&(e.url.indexOf("getLastActivityDetail")>-1?refreshPressedTrue=!0:refreshPressedTrue=!1);localStorage.getItem("sessionAuthenticationToken")?map.sessionVO.sessionAuthenticationToken=localStorage.getItem("sessionAuthenticationToken"):(localStorage.setItem("errorMessg",exceptionMsg.sessionMgmt),window.location=properties.ui_domain),void 0===e.data.userVO&&(localStorage.getItem("userId")?e.data.userVO={userId:localStorage.getItem("userId")}:e.data.userVO={}),(themisLandingPage||insideThemisStudProfile)&&(e.data.userVO.enableComparison=CaseConnect.themisSAenableComparison),e.data.userVO.sessionVO=map.sessionVO;var t=localStorage.getItem("userRole"),n=localStorage.getItem("userRoleId");e.data.userVO.userRole=null==t?"":t,e.data.userVO.userRoleId=null==n?"":n;$.ajax({type:e.method||"POST",headers:{accept:"application/json","content-type":"application/json"},url:e.url,data:JSON.stringify(e.data),handler:e.handler,target:e.target}).done(this.success).fail(this.failure)},success:function(e,t,n){(localStorage.getItem("userId")||CaseConnect.currentUserId||void 0!==e.userVO&&null!==e.userVO.userId)&&!comingFromThanksForRegistration&&void 0!==e.sessionAuthenticationToken&&(localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),map.sessionVO.sessionAuthenticationToken=localStorage.getItem("sessionAuthenticationToken")),this.handler.response.apply(this.target,[e,t]),localStorage.getItem("userId")||CaseConnect.currentUserId},failure:function(e,t,n){Utility.handleSessionAuthentication(e.responseJSON)?this.handler.response.apply(this.target,[e.responseJSON,t]):window.location=properties.ui_domain},showSpinner:function(){map["loading-spinner"].show()},hideSpinner:function(){map["loading-spinner"].hide()},saveSessionVO:function(){localStorage.setItem("sessionVO",JSON.stringify(session)),map.sessionVO=session},getSessionVO:function(){var e=localStorage.getItem("sessionVO"),t=localStorage.getItem("sessionAuthenticationToken");map.isIE9=9==parseInt(navigator.userAgent.split("MSIE")[1]),fetchSessionVOItemsForEreaderAndOutline(),setTimeout(function(){fetchSessionVOItems(),e=localStorage.getItem("sessionVO"),Utility.saveSessionVO()},500),e&&t?(map.sessionVO=JSON.parse(e),localStorage.getItem("userId")||Utility.getAnonymousSessionAuthToken()):(fetchSessionVOItems(),Utility.saveSessionVO(),t||Utility.getAnonymousSessionAuthToken())},getAnonymousSessionAuthToken:function(){Utility.showSpinner(),$.ajax({type:"POST",url:properties[properties.env]+"/manageUserService/generateSessionAuthenticationTokenForUnLoggedInUser",headers:{accept:"application/json","content-type":"application/json"},async:!1,data:JSON.stringify({userVO:{sessionVO:map.sessionVO}}),success:function(e){"true"==e.status&&void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),Utility.hideSpinner()},error:function(e,t,n){Utility.hideSpinner(),alert(e.responseJSON.errorMessg)}})},handleSessionAuthentication:function(e){if("bus.exception.useridfromcache.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.timestampfromcache.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.session.authentication.token.expired.for.unloggedin.user"==e.wkErrorCode||"bus.exception.useragentfromcache.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.userprivatetokenfromcache.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.session.authentication.token.for.un.loggedin.user.is.not.available.in.system"==e.wkErrorCode||"bus.exception.userid.is.missing"==e.wkErrorCode||"bus.exception.useridfromrequestvo.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.useridfromdb.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.timestampfromdb.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.session.authentication.token.expired.for.loggedin.user"==e.wkErrorCode||"bus.exception.devicetypefromrequest.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.devicetypefromdb.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.useragentfromrequest.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.useragentfromdb.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.userprivatetokenfromdb.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.session.authentication.token.decryption.not.happened.properly"==e.wkErrorCode||"bus.exception.session.authentication.token.is.missing"==e.wkErrorCode||"bus.exception.unable.to.decrypt.malformed.session.authentication.token"==e.wkErrorCode||"bus.exception.tokengeneration.timestampfromdb.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.sessionauthenticationtokenfromdb.not.matched.with.session.authentication.token"==e.wkErrorCode||"bus.exception.tokengeneration.timestampfromcache.not.matched.with.session.authentication.token"==e.wkErrorCode){if(localStorage.getItem("userId")){window.location.pathname.split("plink");document.cookie="sameSession=false;path=/";var t=localStorage.getItem("keepLoggedIn");delete map.userId,removeBookshelfLinkTOLogo()}return localStorage.clear(),t&&localStorage.setItem("keepLoggedIn","true"),localStorage.setItem("errorMessg",e.errorMessg),!1}return!0},saveLoginState:function(e){if("true"==CaseConnect.permalinkOrigin){window.location.pathname.split("plink");document.cookie="sameSession=true;path=/"}else document.cookie="sameSession=true;path=/;";localStorage.setItem("userId",e.userVO.userId),localStorage.setItem("userType",e.userVO.userType),localStorage.setItem("email",e.userVO.email),localStorage.setItem("firstName",e.userVO.firstName),localStorage.setItem("lastName",e.userVO.lastName),localStorage.setItem("userRole",e.userVO.userRole),localStorage.setItem("userRoleId",e.userVO.userRoleId)},getLoginState:function(){map.firstName=localStorage.getItem("firstName"),map.email=localStorage.getItem("email"),map.userType=localStorage.getItem("userType"),map.userId=localStorage.getItem("userId"),map.userRole=localStorage.getItem("userRole"),map.userRoleId=localStorage.getItem("userRoleId")},getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var i=n[o].trim();if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},saveLastActivity:function(e,t){t=t||map.userId;var n={};n.data={userVO:{userId:t,userActivityVO:e,sessionVO:map.sessionVO}},n.handler={response:function(){}},n.url=properties[properties.env]+"/activityTrackingService/saveUserLastActivity",this.fireRequest(n)},displayModalAlert:function(e){$("#alertModal .modal-dialog").removeAttr("style"),$("#alertModal-body").html(e),$("#alertModal").modal()},trackGA:function(e){console.log("page tracked in GA :"+e),"undefined"!=typeof _gaq&&_gaq.push(["_trackPageview",properties.full_base_url+e])},displayUnSupportedBrowserMsg:function(){var e,t,n,o,i="You are using a browser that this website does not support. By continuing to use this browser, your experience on this website may be degraded. For a better experience, please use one of the following supported browsers. <br>"+String.fromCharCode(8226)+" Internet Explorer 10 for Windows <br>"+String.fromCharCode(8226)+" Internet Explorer 11 for Windows <br>"+String.fromCharCode(8226)+" Mozilla Firefox for Windows <br>"+String.fromCharCode(8226)+" Google Chrome for Windows <br>"+String.fromCharCode(8226)+" Safari for Mac <br>"+String.fromCharCode(8226)+" Safari for iPad <br>"+String.fromCharCode(8226)+" Chrome for Android",s=(t=navigator.appName,n=navigator.userAgent,(o=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i))&&null!=(e=n.match(/version\/([\.\d]+)/i))&&(o[2]=e[1]),o=o?[o[1],o[2]]:[t,navigator.appVersion,"-?"]),a=$.trim(s[0].toLowerCase()),r=parseInt(s[1]),l=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./);-1!=navigator.userAgent.indexOf("Macintosh")?CaseConnect.deviceType="Mac Desktop":-1!=navigator.userAgent.indexOf("iPad")?CaseConnect.deviceType="iPad":-1!=navigator.userAgent.indexOf("Android")?CaseConnect.deviceType="Android Tablet":-1!=navigator.userAgent.indexOf("iPhone")&&(CaseConnect.deviceType="iPhone"),l||"msie"==a&&r>9||"firefox"==a&&r>24||"Mac Desktop"==CaseConnect.deviceType&&"safari"==a&&r>5||"iPad"==CaseConnect.deviceType&&"safari"==a&&r>5||"iPhone"==CaseConnect.deviceType&&"safari"==a&&r>5||"Android Tablet"==CaseConnect.deviceType&&"chrome"==a||"chrome"==a&&r>22||(alertMessagesModal(i),$("#alertModal .modal-dialog").css("width","420px"))}},Handlebars.getTemplate=function(e){return void 0!==Handlebars.templates&&void 0!==Handlebars.templates[e]||$.ajax({url:"handlebar-templates/"+e+".handlebars?v26576",dataType:"text",type:"GET",cache:!1,success:function(t,n,o){void 0===Handlebars.templates&&(Handlebars.templates={}),Handlebars.templates[e]=Handlebars.compile(t)},async:!1}),Handlebars.templates[e]},Handlebars.registerHelper("showhideLO",function(e,t,n){return e=parseInt(e),t=parseInt(t),e>0||t>0?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("limitWords",function(e,t,n){var o="",i=e.replace(/\s+/g," ").split(" "),s=0;if(i.length>t){for(s=0;s<t;s++)o=o+" "+i[s]+" ";return o+"..."}return e}),Handlebars.registerHelper("showSeparator",function(e,t,n){return e+1==t?"":'<div class="student-horizontal-separator-custom" style="margin-top:20px;"></div>'}),Handlebars.registerHelper("manipulateDecimalPlaces",function(e,t){isNaN(e)||(e=e.toString()).indexOf(".")>-1&&(e=parseFloat(e).toFixed(2));return e}),Handlebars.registerHelper("manipulateDecimalPlacesUnanswered",function(e,t){isNaN(e)||(e=(100-e).toString()).indexOf(".")>-1&&(e=parseFloat(e).toFixed(2));return e});