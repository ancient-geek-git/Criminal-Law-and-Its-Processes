var comingFromPrint=!1,relatedNotesSpanTag=null,relatedBriefSpanTag=null,noPrintSectionList=[],ereaderFontSize="",printFontSize="";function showPrintReadModal(){if("true"==CaseConnect.freeTrialFlag)$("#ftprintModal").modal("show");else{$("#page-loading-spinner").show(),$("#print-content-modal").modal("show"),relatedHighLightTags=$("highlight"),relatedNotesSpanTag=$(".notesSpanBlock"),relatedBriefTags=$("briefsTag"),relatedBriefSpanTag=$(".briefSpanBlock"),ereaderPrintClicked=!0,noPrintSectionList=[],$(".print-fs button").css("border","none"),$(".print-fs #"+currentFontId).css("border","1px solid #007ac3"),ereaderFontSize=currentFontId,printFontSize="textsize-default",loadEreaderPrintFromRead(),$("#print-tab-section-container #links-container").remove(),$("#print-tab-section-container #notes-container").remove(),$(".outlineDatainPrint").remove(),$("<div class='outlineDatainPrint'></div>").appendTo("#print-content-modal #tab-section-container"),$("#print-ereader-scroller #print-tab-section-container").click(!1),"chapter"===CaseConnect.bookData.chapterType?(getSectionListForPrint(),$(".print-sections").show()):($(".print-sections #chapter-section-list").html(),$(".print-sections").hide()),$("#print-ereader-scroller #print-tab-section-container a").each(function(){this.onclick=!1}),$("input.page-sec").prop("checked","true"),$(".modal-content #print-ereader-scroller #print-tab-section-container anchortag").css("color","#000!important");var e=$("#ereader-container #ereader-scroller").css("max-height").replace("px",""),t=(e=parseInt(e)+1)+"px";$("#print-content-modal .modal-content .ereader-assessment-modal-body").css("max-height",t),$("#print-content-modal .modal-content .ereader-assessment-modal-body .print-options").css("height",t),$("#page-loading-spinner").hide(),getChapterOutineForPrint()}}var ereaderPrintClicked=!1,relatedHighLightTags=null,relatedBriefTags=null;function loadEreaderPrintFromRead(){var e=$("#ereader-scroll-container").html();if($(".modal-content #print-ereader-scroller #print-tab-section-container").html(""),$("#print-tab-section-container").html(e),$("#print-ereader-scroller #tab-section-container").addClass("print-tab-container"),$("#print-ereader-scroller #notes-container").addClass("print-note-container"),$("#print-tab-section-container #notes-container").remove(),$(".notesText").removeClass("hidden-xs"),$(".labelNoteWrapper").removeClass("hidden-xs"),$(".labelText").removeClass("hidden-xs"),$(".briefNotesText").removeClass("hidden-xs"),$("input#print_notes_margin").prop("checked","true"),$("input#print_highlights").prop("checked","true"),$(".print-fs button").css("border","none"),printNoteChecked||($("#print_notes_margin").prop("checked",!1),$("#print-ereader-scroller #notes-container").hide(),$("#print-ereader-scroller #tab-section-container").css("width","95%")),!printHighlightChecked){$("#print_highlights").prop("checked",!1),printHighlightChecked=!1;for(var t=$("#print-ereader-scroller .highlightedText"),n=0;n<t.length;n++){var i=$("#print-ereader-scroller highlight#"+t[n].id);i.removeAttr("style"),i.attr("style","background-color:#ffffff")}var o=$("#print-ereader-scroller .briefElementText");for(n=0;n<o.length;n++){var r=$("#print-ereader-scroller briefsTag#"+o[n].id);r.removeAttr("style"),r.attr("style","background-color:#ffffff")}}$("#print-tab-section-container #links-container").remove(),$(".modal-content #print-ereader-scroller #print-tab-section-container anchortag").css("color","#000!important");var s=$("#ereader-container #ereader-scroller").css("max-height").replace("px",""),c=(s=parseInt(s)+1)+"px";$("#print-content-modal .modal-content .ereader-assessment-modal-body").css("max-height",c),$("#print-content-modal .modal-content .ereader-assessment-modal-body .print-options").css("height",c),changeFontSizePrint(printFontSize)}function loadPrintModalAfterResize(){if($("#print-ereader-scroller #print-tab-section-container").click(!1),$("#print-ereader-scroller #notes-container").click(!1),$("#print-ereader-scroller #notes-container a").removeAttr("onclick"),changeFontSizePrint(printFontSize),$(".notesText").removeClass("hidden-xs"),$(".labelNoteWrapper").removeClass("hidden-xs"),$(".labelText").removeClass("hidden-xs"),$(".briefNotesText").removeClass("hidden-xs"),$("input#print_notes_margin").prop("checked","true"),$("input#print_highlights").prop("checked","true"),$(".print-fs button").css("border","none"),$(".print-fs #"+currentFontId).css("border","1px solid #007ac3"),printNoteChecked||($("#print_notes_margin").prop("checked",!1),$("#print-ereader-scroller #notes-container").hide(),$("#print-ereader-scroller #tab-section-container").css("width","95%")),!printHighlightChecked){$("#print_highlights").prop("checked",!1),printHighlightChecked=!1;for(var e=$("#print-ereader-scroller .highlightedText"),t=0;t<e.length;t++){var n=$("#print-ereader-scroller highlight#"+e[t].id);n.removeAttr("style"),n.attr("style","background-color:#ffffff")}var i=$("#print-ereader-scroller .briefElementText");for(t=0;t<i.length;t++){var o=$("#print-ereader-scroller briefsTag#"+i[t].id);o.removeAttr("style"),o.attr("style","background-color:#ffffff")}}checkNoPrintSectionList(),$("#print-tab-section-container #links-container").remove(),$(".modal-content #print-ereader-scroller #print-tab-section-container anchortag").css("color","#000!important");var r=$("#ereader-container #ereader-scroller").css("max-height").replace("px",""),s=(r=parseInt(r)+1)+"px";$("#print-content-modal .modal-content .ereader-assessment-modal-body").css("max-height",s),$("#print-content-modal .modal-content .ereader-assessment-modal-body .print-options").css("height",s)}function checkNoPrintSectionList(){noPrintSectionList.length>0?($.each(noPrintSectionList,function(e,t){if("epub-localToc"==t||"cc-localToc"==t)$(".print-sections div[data-id='"+t+"']").find(".page-sec").prop("checked",!1),$("#print-tab-section-container ."+t).hide(),$("#print-tab-section-container .cc-localToc").hide();else{$(".print-sections div[data-id='"+t+"']").find(".page-sec").prop("checked",!1);var n=t,i=$(".print-sections div[data-id='"+t+"']").attr("data-type");if("-999"===i.toString()&&(i="C"),"A"==i||"B"==i){$("#print-tab-section-container #"+n).children().not(".cc-section").hide();for(var o,r=$("#print-tab-section-container #"+n).children().not(".cc-section"),s=0;s<r.length;s++){if(""==(o=r[s].id)){var c=[],a="",l="";$(r[s]).each(function(){$(this).find("highlight").each(function(){a=$(this).attr("id"),c.push(a)}),$(this).find("briefstag").each(function(){l=$(this).attr("id"),c.push(l)})}),c.length>0&&hideNotesMargin(c)}else{c=[],a="",l="";$("#print-tab-section-container #"+o).each(function(){$(this).find("highlight").each(function(){a=$(this).attr("id"),c.push(a)}),$(this).find("briefstag").each(function(){l=$(this).attr("id"),c.push(l)})}),c.length>0&&hideNotesMargin(c)}$(r[s].childNodes).hasClass("cc-principal-case")&&$(r[s].childNodes).each(function(){if(null!=$(this)[0].className&&-1!=$(this)[0].className.indexOf("cc-section")&&-1==noPrintSectionList.indexOf($(this)[0].id)){$(r[s]).show(),$(r[s].childNodes).not(".cc-section").hide();var e=[],t="",n="";$("#print-tab-section-container #"+$(this)[0].id).each(function(){$(this).find("highlight").each(function(){t=$(this).attr("id"),e.push(t)}),$(this).find("briefstag").each(function(){n=$(this).attr("id"),e.push(n)})}),e.length>0&&showNotesMargin(e)}})}}if("pCase"==i||"C"==i){c=[],a="",l="";$("#print-tab-section-container #"+n).each(function(){$(this).find("highlight").each(function(){a=$(this).attr("id"),c.push(a)}),$(this).find("briefstag").each(function(){l=$(this).attr("id"),c.push(l)})}),c.length>0&&hideNotesMargin(c),$("#print-tab-section-container #"+n).hide()}}}),showError()):showError()}var notesList=[],brfsList=[];function calcNotesOnRightPrint(){var e,t,n,i,o=[],r=[],s={},c={};$("ol.epub-parenlistlcletter li").addClass("goToPageBug"),$("ol.epub-parenlistucletter li").addClass("goToPageBug"),$("ol.epub-parenlistdecimal li").addClass("goToPageBug"),$("ol.epub-bracketlistdecimal li").addClass("goToPageBug"),$("ol.epub-ucletter li").addClass("goToPageBug"),$("ol.epub-lcletter li").addClass("goToPageBug"),$("ol.epub-ucroman li").addClass("goToPageBug"),$("ol.epub-lcroman li").addClass("goToPageBug"),$("ol.epub-decimal li").addClass("goToPageBug"),$(".epub-law-heading-container").addClass("goToPageBug"),$(".epub-law-case-marker").addClass("goToPageBug"),$(".modal-content #print-ereader-scroller #tab-section-container .highlightedText").each(function(){e=this.id,t=this.offsetTop,0!=$("#print-ereader-scroller #tab-section-container #"+e).outerHeight()&&(s={id:e,topVal:t},o.push(s))}),$(".modal-content #print-ereader-scroller #tab-section-container .briefElementText").each(function(){i=this.id,n=this.offsetTop,0!=$("#print-ereader-scroller #tab-section-container #"+i).outerHeight()&&(c={id:i,topVal:n},r.push(c))}),notesList=o,brfsList=r,dispNotesOnRightForPrint(o,r),$("ol.epub-parenlistlcletter li").removeClass("goToPageBug"),$("ol.epub-parenlistucletter li").removeClass("goToPageBug"),$("ol.epub-parenlistdecimal li").removeClass("goToPageBug"),$("ol.epub-bracketlistdecimal li").removeClass("goToPageBug"),$("ol.epub-ucletter li").removeClass("goToPageBug"),$("ol.epub-lcletter li").removeClass("goToPageBug"),$("ol.epub-ucroman li").removeClass("goToPageBug"),$("ol.epub-lcroman li").removeClass("goToPageBug"),$("ol.epub-decimal li").removeClass("goToPageBug"),$(".epub-law-heading-container").removeClass("goToPageBug"),$(".epub-law-heading-container .epub-law-case-marker").removeClass("goToPageBug")}function alignNotesOrBriefs(){for(var e=$("#print-ereader-scroller #notes-container a.anchorNotes"),t=$("#print-ereader-scroller #notes-container a.anchorBriefs"),n=0,i=0,o=0;o<e.length;o++)if(0!=$("#print-ereader-scroller #notes-container #"+e[o].id+" div").outerHeight()){var r=parseInt($("#print-ereader-scroller #notes-container #"+e[o].id+" span").css("top").replace("px",""));if(r<n){var s=(r=n+5)+"px";$("#print-ereader-scroller #notes-container #"+e[o].id+" span").css("top",s),$("#print-ereader-scroller #notes-container #"+e[o].id+" div").css("top",s)}n=r+$("#"+e[o].id+" div").height()}for(o=0;o<t.length;o++)if(0!=$("#print-ereader-scroller #notes-container #"+t[o].id+" div").outerHeight()){var c=parseInt($("#print-ereader-scroller #notes-container #"+t[o].id+" span").css("top").replace("px",""));if(c<i){s=(c=i+5)+"px";$("#print-ereader-scroller #notes-container #"+t[o].id+" span").css("top",s),$("#print-ereader-scroller #notes-container #"+t[o].id+" div").css("top",s)}i=c+$("#"+t[o].id+" div").height()}}function dispNotesOnRightForPrint(e,t){var n=0,i=0,o=0,r=0,s=parseInt($("#print-ereader-scroller #print-tab-section-container .ereader-content").css("line-height").replace("px","")),c=[],a=[];if(e.length>0)do{e.length>100?(c=[],c=e.splice(0,100)):(c=[],c=e,e=[]),$.each(c,function(e,t){var i=t.topVal,r=$("#print-ereader-scroller #notes-container #anchorElement"+t.id+" .notesText").height();null!=o&&(n==i?i=i+o+.2*s:n>i?i+=o:i<n+o&&(i=n+o)),n=i,o=null!=r?r+.2*s:null,$("#print-ereader-scroller #notes-container span#"+t.id).css("top",i),$("#print-ereader-scroller #notes-container span#"+t.id).parent().addClass("anchorNotes"),$("#print-ereader-scroller #notes-container #notesDiv"+t.id).css("top",i)})}while(e.length>0);if(t.length>0)do{t.length>100?(a=[],a=t.splice(0,100)):(a=[],a=t,t=[]),$.each(a,function(e,t){var n=t.topVal,o=$("#print-ereader-scroller #notes-container #briefAnchorElement"+t.id+" .labelNoteWrapper").height();null!=r&&(i==n?n=n+r+.2*s:i>n?n+=r:n<i+r&&(n=i+r)),i=n,r=null!=o?o+.2*s:null,$("#print-ereader-scroller #notes-container span#colSpan"+t.id).css("top",n),$("#print-ereader-scroller #notes-container span#colSpan"+t.id).parent().addClass("anchorBriefs"),$("#print-ereader-scroller #notes-container #briefWrapDiv"+t.id).css("top",n)})}while(t.length>0);alignNotesOrBriefs()}function showNotesMargin(e){$.each(e,function(e,t){var n="briefAnchorElement"+t;$("#print-tab-section-container #notes-container #"+("anchorElement"+t)).show(),$("#print-tab-section-container #notes-container #"+n).show()})}function hideNotesMargin(e){$.each(e,function(e,t){var n="briefAnchorElement"+t;$("#print-tab-section-container #notes-container #"+("anchorElement"+t)).hide(),$("#print-tab-section-container #notes-container #"+n).hide()})}function getHighlightOrBriefIds(e){var t=[],n="",i="";return $("#print-tab-section-container #"+e).each(function(){$(this).find("highlight").each(function(){n=$(this).attr("id"),t.push(n)}),$(this).find("briefstag").each(function(){i=$(this).attr("id"),t.push(i)})}),t}function selectAllfunc(){$("input.page-sec").prop("checked","true"),noPrintSectionList=[];var e=$("#chapter-section-list").children();if($(e).each(function(){var e=$(this).attr("data-type");if("-999"===e.toString()&&(e="C"),"A"==e||"B"==e)if("epub-localToc"==(a=$(this).attr("data-id")))$("#print-tab-section-container ."+a).show(),$("#print-tab-section-container .cc-localToc").show();else{$("#print-tab-section-container #"+a).children().not(".cc-section").show();for(var t,n=$("#print-tab-section-container #"+a).children().not(".cc-section"),i=0;i<n.length;i++){if(""==(t=n[i].id)){var o=[],r="",s="";$(n[i]).each(function(){$(this).find("highlight").each(function(){r=$(this).attr("id"),o.push(r)}),$(this).find("briefstag").each(function(){s=$(this).attr("id"),o.push(s)})}),o.length>0&&showNotesMargin(o)}else{var c=getHighlightOrBriefIds(t);c.length>0&&showNotesMargin(c)}$(n[i].childNodes).hasClass("cc-principal-case")&&($(n[i]).show(),$(n[i].childNodes).not(".cc-section").show())}}if("pCase"==e||"C"==e){var a=$(this).attr("data-id");$("#print-tab-section-container #"+a).show();var l=getHighlightOrBriefIds(a);if(l.length>0&&showNotesMargin(l),!$("#print-tab-section-container #"+a).parent().hasClass("cc-section"))$("#print-tab-section-container #"+a).parent().show(),"hide"==$("#print-tab-section-container #"+a).parent().css("display")&&$("#print-tab-section-container #"+a).parent().children().not(".cc-section").hide()}}),printNoteChecked||($("#print-ereader-scroller #notes-container").hide(),$("#print-ereader-scroller #tab-section-container").css("width","95%")),!printHighlightChecked){for(var t=$("#print-ereader-scroller .highlightedText"),n=0;n<t.length;n++){var i=$("#print-ereader-scroller highlight#"+t[n].id);i.removeAttr("style"),i.attr("style","background-color:#ffffff")}var o=$("#print-ereader-scroller .briefElementText");for(n=0;n<o.length;n++){var r=$("#print-ereader-scroller briefsTag#"+o[n].id);r.removeAttr("style"),r.attr("style","background-color:#ffffff")}}0!=$("input.page-sec:checked").length&&$("#print-ereader-scroller #print-tab-section-container .ereader-content").removeAttr("style")}function deselectAllfunc(){var e=[],t=$("#chapter-section-list").children();$(t).each(function(){var t=$(this).attr("data-type");if("-999"===t.toString()&&(t="C"),"A"==t||"B"==t)if("epub-localToc"==(l=$(this).attr("data-id")))$("#print-tab-section-container ."+l).hide(),$("#print-tab-section-container .cc-localToc").hide(),e.push(l);else{$("#print-tab-section-container #"+l).children().not(".cc-section").hide();var n,i=$("#print-tab-section-container #"+l).children().not(".cc-section");e.push(l);for(var o=0;o<i.length;o++){if(""==(n=i[o].id)){var r=[],s="",c="";$(i[o]).each(function(){$(this).find("highlight").each(function(){s=$(this).attr("id"),r.push(s)}),$(this).find("briefstag").each(function(){c=$(this).attr("id"),r.push(c)})}),r.length>0&&hideNotesMargin(r)}else{var a=getHighlightOrBriefIds(n);a.length>0&&hideNotesMargin(a)}$(i[o].childNodes).hasClass("cc-principal-case")&&($(i[o]).hide(),$(i[o].childNodes).not(".cc-section").hide(),$(i[o].childNodes).each(function(){if(null!=$(this)[0].className&&-1!=$(this)[0].className.indexOf("cc-section")){var e=getHighlightOrBriefIds($(this)[0].id);e.length>0&&hideNotesMargin(e)}}))}}if("pCase"==t||"C"==t){var l=$(this).attr("data-id");$("#print-tab-section-container #"+l).hide();var p=getHighlightOrBriefIds(l);if(p.length>0&&hideNotesMargin(p),!$("#print-tab-section-container #"+l).parent().hasClass("cc-section"))"hide"==$("#print-tab-section-container #"+l).parent().css("display")&&($("#print-tab-section-container #"+l).parent().hide(),$("#print-tab-section-container #"+l).parent().children().not(".cc-section").hide());e.push(l)}}),noPrintSectionList=e;for(var n=0;n<e.length;n++)$("#chapter-section-list").find("[data-id='"+e[n]+"'] input").prop("checked",!1);0==$("input.page-sec:checked").length&&$("#print-ereader-scroller #print-tab-section-container .ereader-content").css("width","100%")}function showError(){0==$("input.page-sec:checked").length?$("#print-ereader-scroller #print-tab-section-container .ereader-content").css("width","100%"):$("#print-ereader-scroller #print-tab-section-container .ereader-content").removeAttr("style")}function changeFontSizePrint(e){currentFontId=e,printFontSize=currentFontId;var t;t="#print-ereader-scroller .ereader-content","textsize-eleven"===currentFontId?($(".ccapp-chunkHeader").css({"font-size":"200%","line-height":"120%"}),$(t+" div:not([cc-font-xxsmall]) p").css({"font-size":"11px","line-height":"15px"}),$(t+" div:not([cc-font-xsmall]) p").css({"font-size":"11px","line-height":"15px"}),$(t+" div:not([cc-font-small]) p").css({"font-size":"11px","line-height":"15px"}),$(t+" div:not([cc-font-medium]) p").css({"font-size":"11px","line-height":"15px"}),$(t+" div:not([cc-font-large]) p").css({"font-size":"11px","line-height":"15px"}),$(t+" div:not([cc-font-xlarge]) p").css({"font-size":"11px","line-height":"15px"}),$(t).find(".cc-font-xxsmall p").css("font-size","8px"),$(t).find(".cc-font-xsmall p").css("font-size","9px"),$(t).find(".cc-font-xsmall").css("font-size","9px"),$(t).find(".cc-font-small p").css("font-size","10px"),$(t).find(".cc-font-small").css("font-size","10px"),$(t).find("#notes-container .notesText").css({"font-size":"11px","line-height":"15px"}),$(t).find("#notes-container .labelNoteWrapper").css({"font-size":"11px","line-height":"15px"}),$(t).find(".cc-font-medium h3 p").css({"font-size":"13px","line-height":"15px"}),$(t).find(".cc-font-medium").css({"font-size":"13px","line-height":"15px"}),$(t).find(".cc-font-large p").css({"font-size":"15px","line-height":"15px"}),$(t).find(".cc-font-large").css({"font-size":"15px","line-height":"15px"}),$(t).find(".cc-font-xlarge").css({"font-size":"19px","line-height":"25px"}),$(t).find(".cc-font-xlarge h2 p").css({"font-size":"19px","line-height":"25px"}),$(t).find(".cc-font-xlarge h3 p").css({"font-size":"19px","line-height":"25px"}),$(t).find(".cc-chapter-title h1 p").css({"font-size":"27px","line-height":"22px"}),$(t).find(".cc-chapter-title").css({"font-size":"27px","line-height":"22px"})):"textsize-thirteen"===currentFontId?($(".ccapp-chunkHeader").css({"font-size":"200%","line-height":"120%"}),$(t+" div:not([cc-font-xxsmall]) p").css({"font-size":"13px","line-height":"17px"}),$(t+" div:not([cc-font-xsmall]) p").css({"font-size":"13px","line-height":"17px"}),$(t+" div:not([cc-font-small]) p").css({"font-size":"13px","line-height":"17px"}),$(t+" div:not([cc-font-medium]) p").css({"font-size":"13px","line-height":"17px"}),$(t+" div:not([cc-font-large]) p").css({"font-size":"13px","line-height":"17px"}),$(t+" div:not([cc-font-xlarge]) p").css({"font-size":"13px","line-height":"17px"}),$(t).find(".cc-font-xxsmall p").css("font-size","9px"),$(t).find(".cc-font-xsmall").css("font-size","11px"),$(t).find(".cc-font-xsmall p").css("font-size","11px"),$(t).find(".cc-font-small").css("font-size","12px"),$(t).find(".cc-font-small p").css("font-size","12px"),$(t).find("#notes-container .notesText").css({"font-size":"12px","line-height":"17px"}),$(t).find("#notes-container .labelNoteWrapper").css({"font-size":"12px","line-height":"17px"}),$(t).find(".cc-font-medium").css({"font-size":"15px","line-height":"17px"}),$(t).find(".cc-font-medium h3 p").css({"font-size":"15px","line-height":"17px"}),$(t).find(".cc-font-large").css({"font-size":"17px","line-height":"17px"}),$(t).find(".cc-font-large p").css({"font-size":"17px","line-height":"17px"}),$(t).find(".cc-font-xlarge").css({"font-size":"21px","line-height":"27px"}),$(t).find(".cc-font-xlarge h2 p").css({"font-size":"21px","line-height":"27px"}),$(t).find(".cc-font-xlarge h3 p").css({"font-size":"21px","line-height":"27px"}),$(t).find(".cc-chapter-title h1 p").css({"font-size":"29px","line-height":"25px"})):"textsize-default"===currentFontId?($(".ccapp-chunkHeader").css({"font-size":"32px","line-height":"39px"}),$(t+" div:not([cc-font-xxsmall]) p").css({"font-size":"15px","line-height":"22px"}),$(t+" div:not([cc-font-xsmall]) p").css({"font-size":"15px","line-height":"22px"}),$(t+" div:not([cc-font-small]) p").css({"font-size":"15px","line-height":"22px"}),$(t+" div:not([cc-font-medium]) p").css({"font-size":"15px","line-height":"22px"}),$(t+" div:not([cc-font-large]) p").css({"font-size":"15px","line-height":"22px"}),$(t+" div:not([cc-font-xlarge]) p").css({"font-size":"15px","line-height":"22px"}),$(t).find(".cc-font-xxsmall p").css("font-size","10px"),$(t).find(".cc-font-xsmall").css("font-size","13px"),$(t).find(".cc-font-xsmall p").css("font-size","13px"),$(t).find(".cc-font-small").css("font-size","14px"),$(t).find(".cc-font-small p").css("font-size","14px"),$(t).find("#notes-container .notesText").css({"font-size":"12px","line-height":"17px"}),$(t).find("#notes-container .labelNoteWrapper").css({"font-size":"12px","line-height":"17px"}),$(t).find(".cc-font-medium").css({"font-size":"15px","line-height":"19px"}),$(t).find(".cc-font-medium h3 p").css({"font-size":"15px","line-height":"19px"}),$(t).find(".cc-font-large").css({"font-size":"17px","line-height":"19px"}),$(t).find(".cc-font-large p").css({"font-size":"17px","line-height":"19px"}),$(t).find(".cc-font-xlarge").css({"font-size":"23px","line-height":"29px"}),$(t).find(".cc-font-xlarge h2 p").css({"font-size":"23px","line-height":"29px"}),$(t).find(".cc-font-xlarge h3 p").css({"font-size":"23px","line-height":"29px"}),$(t).find(".cc-chapter-title").css({"font-size":"36px","line-height":"40px"}),$(t).find(".cc-chapter-title h1 p").css({"font-size":"36px","line-height":"40px"})):"textsize-seventeen"===currentFontId?($(".ccapp-chunkHeader").css({"font-size":"200%","line-height":"120%"}),$(t+" div:not([cc-font-xxsmall]) p").css({"font-size":"17px","line-height":"19px"}),$(t+" div:not([cc-font-xsmall]) p").css({"font-size":"17px","line-height":"19px"}),$(t+" div:not([cc-font-small]) p").css({"font-size":"17px","line-height":"19px"}),$(t+" div:not([cc-font-medium]) p").css({"font-size":"17px","line-height":"19px"}),$(t+" div:not([cc-font-large]) p").css({"font-size":"17px","line-height":"19px"}),$(t+" div:not([cc-font-xlarge]) p").css({"font-size":"17px","line-height":"19px"}),$(t).find(".cc-font-xxsmall p").css("font-size","12px"),$(t).find(".cc-font-xsmall").css("font-size","15px"),$(t).find(".cc-font-xsmall p").css("font-size","15px"),$(t).find(".cc-font-small").css("font-size","16px"),$(t).find(".cc-font-small p").css("font-size","16px"),$(t).find("#notes-container .notesText").css({"font-size":"12px","line-height":"17px"}),$(t).find("#notes-container .labelNoteWrapper").css({"font-size":"12px","line-height":"17px"}),$(t).find(".cc-font-medium").css({"font-size":"19px","line-height":"21px"}),$(t).find(".cc-font-medium h3 p").css({"font-size":"19px","line-height":"21px"}),$(t).find(".cc-font-large").css({"font-size":"21px","line-height":"21px"}),$(t).find(".cc-font-large p").css({"font-size":"21px","line-height":"21px"}),$(t).find(".cc-font-xlarge").css({"font-size":"26px","line-height":"31px"}),$(t).find(".cc-font-xlarge h2 p").css({"font-size":"26px","line-height":"31px"}),$(t).find(".cc-font-xlarge h3 p").css({"font-size":"26px","line-height":"31px"}),$(t).find(".cc-chapter-title").css({"font-size":"38px","line-height":"42px"}),$(t).find(".cc-chapter-title h1 p").css({"font-size":"38px","line-height":"42px"})):"textsize-nineteen"===currentFontId?($(".ccapp-chunkHeader").css({"font-size":"200%","line-height":"120%"}),$(t+" div:not([cc-font-xxsmall]) p").css({"font-size":"19px","line-height":"21px"}),$(t+" div:not([cc-font-xsmall]) p").css({"font-size":"19px","line-height":"21px"}),$(t+" div:not([cc-font-small]) p").css({"font-size":"19px","line-height":"21px"}),$(t+" div:not([cc-font-medium]) p").css({"font-size":"19px","line-height":"21px"}),$(t+" div:not([cc-font-large]) p").css({"font-size":"19px","line-height":"21px"}),$(t+" div:not([cc-font-xlarge]) p").css({"font-size":"19px","line-height":"21px"}),$(t).find(".cc-font-xxsmall p").css("font-size","14px"),$(t).find(".cc-font-xsmall").css("font-size","17px"),$(t).find(".cc-font-xsmall p").css("font-size","17px"),$(t).find(".cc-font-small").css("font-size","18px"),$(t).find(".cc-font-small p").css("font-size","18px"),$(t).find("#notes-container .notesText").css({"font-size":"12px","line-height":"17px"}),$(t).find("#notes-container .labelNoteWrapper").css({"font-size":"12px","line-height":"17px"}),$(t).find(".cc-font-medium").css({"font-size":"21px","line-height":"23px"}),$(t).find(".cc-font-medium h3 p").css({"font-size":"21px","line-height":"23px"}),$(t).find(".cc-font-large").css({"font-size":"23px","line-height":"23px"}),$(t).find(".cc-font-large p").css({"font-size":"23px","line-height":"23px"}),$(t).find(".cc-font-xlarge").css({"font-size":"28px","line-height":"33px"}),$(t).find(".cc-font-xlarge h2 p").css({"font-size":"28px","line-height":"33px"}),$(t).find(".cc-font-xlarge h3 p").css({"font-size":"28px","line-height":"33px"}),$(t).find(".cc-chapter-title").css({"font-size":"40px","line-height":"44px"}),$(t).find(".cc-chapter-title h1 p").css({"font-size":"40px","line-height":"44px"})):"textsize-twentyone"===currentFontId&&($(".ccapp-chunkHeader").css({"font-size":"200%","line-height":"120%"}),$(t+" div:not([cc-font-xxsmall]) p").css({"font-size":"21px","line-height":"25px"}),$(t+" div:not([cc-font-xsmall]) p").css({"font-size":"21px","line-height":"25px"}),$(t+" div:not([cc-font-small]) p").css({"font-size":"21px","line-height":"25px"}),$(t+" div:not([cc-font-medium]) p").css({"font-size":"21px","line-height":"25px"}),$(t+" div:not([cc-font-large]) p").css({"font-size":"21px","line-height":"25px"}),$(t+" div:not([cc-font-xlarge]) p").css({"font-size":"21px","line-height":"25px"}),$(t).find(".cc-font-xxsmall p").css({"font-size":"16px","line-height":"20px"}),$(t).find(".cc-font-xsmall").css({"font-size":"19px","line-height":"20px"}),$(t).find(".cc-font-xsmall p").css({"font-size":"19px","line-height":"20px"}),$(t).find(".cc-font-small").css({"font-size":"20px","line-height":"22px"}),$(t).find(".cc-font-small p").css({"font-size":"20px","line-height":"22px"}),$(t).find(".cc-font-medium").css({"font-size":"23px","line-height":"25px"}),$(t).find(".cc-font-medium h3 p").css({"font-size":"23px","line-height":"25px"}),$(t).find(".cc-font-large").css({"font-size":"25px","line-height":"25px"}),$(t).find(".cc-font-large p").css({"font-size":"25px","line-height":"25px"}),$(t).find(".cc-font-xlarge").css({"font-size":"30px","line-height":"35px"}),$(t).find(".cc-font-xlarge h2 p").css({"font-size":"30px","line-height":"35px"}),$(t).find(".cc-font-xlarge h3 p").css({"font-size":"30px","line-height":"35px"}),$(t).find(".cc-chapter-title").css({"font-size":"42px","line-height":"46px"}),$(t).find(".cc-chapter-title h1 p").css({"font-size":"42px","line-height":"46px"}),$(t).find("#notes-container .notesText").css({"font-size":"12px","line-height":"17px"}),$(t).find("#notes-container .labelNoteWrapper").css({"font-size":"12px","line-height":"17px"})),$(".print-fs button").css("border","none"),$(".print-fs #"+currentFontId).css("border","1px solid #007ac3")}function printPageSection(e,t){var n=$(e).data("id"),i=$(e).data("type");"-999"===i.toString()&&(i="C");var o=getHighlightOrBriefIds(n);if(1==$(e).find(".page-sec").prop("checked")){if("A"==i||"B"==i)if("epub-localToc"==n){$("#print-tab-section-container ."+n).show(),$("#print-tab-section-container .cc-localToc").show();var r=noPrintSectionList.indexOf(n);-1!=r&&noPrintSectionList.splice(r,1)}else{$("#print-tab-section-container #"+n).children().not(".cc-section").show();var s=$("#print-tab-section-container #"+n).children().not(".cc-section"),c=noPrintSectionList.indexOf(n);-1!=c&&noPrintSectionList.splice(c,1);for(var a=0;a<s.length;a++){if(""==(g=s[a].id)){var l=[],p="",d="";$(s[a]).each(function(){$(this).find("highlight").each(function(){p=$(this).attr("id"),l.push(p)}),$(this).find("briefstag").each(function(){d=$(this).attr("id"),l.push(d)})}),l.length>0&&showNotesMargin(l)}else{(f=getHighlightOrBriefIds(g)).length>0&&showNotesMargin(f)}$(s[a].childNodes).hasClass("cc-principal-case")&&($(s[a]).show(),$(s[a].childNodes).not(".cc-section").show(),$(s[a].childNodes).each(function(){if(null!=$(this)[0].className&&-1!=$(this)[0].className.indexOf("cc-section")){var e=getHighlightOrBriefIds($(this)[0].id);$("#chapter-section-list").find("[data-id='"+$(this)[0].id+"'] input").prop("checked")?e.length>0&&showNotesMargin(e):e.length>0&&hideNotesMargin(e)}}))}}if("pCase"==i||"C"==i)if($("#print-tab-section-container #"+n).show(),o.length>0&&showNotesMargin(o),-1!=(h=noPrintSectionList.indexOf(n))&&noPrintSectionList.splice(h,1),!$("#print-tab-section-container #"+n).parent().hasClass("cc-section"))$("#print-tab-section-container #"+n).parent().show(),"hide"==$("#print-tab-section-container #"+n).parent().css("display")&&$("#print-tab-section-container #"+n).parent().children().not(".cc-section").hide()}else{if("A"==i||"B"==i)if("epub-localToc"==n){$("#print-tab-section-container ."+n).hide(),$("#print-tab-section-container .cc-localToc").hide(),-1==(h=noPrintSectionList.indexOf(n))&&noPrintSectionList.push(n)}else{$("#print-tab-section-container #"+n).children().not(".cc-section").hide();var h,g;s=$("#print-tab-section-container #"+n).children().not(".cc-section");-1==(h=noPrintSectionList.indexOf(n))&&noPrintSectionList.push(n);for(a=0;a<s.length;a++){if(""==(g=s[a].id)){l=[],p="",d="";$(s[a]).each(function(){$(this).find("highlight").each(function(){p=$(this).attr("id"),l.push(p)}),$(this).find("briefstag").each(function(){d=$(this).attr("id"),l.push(d)})}),l.length>0&&hideNotesMargin(l)}else{var f;(f=getHighlightOrBriefIds(g)).length>0&&hideNotesMargin(f)}$(s[a].childNodes).hasClass("cc-principal-case")&&($(s[a]).show(),$(s[a].childNodes).not(".cc-section").hide(),$(s[a].childNodes).each(function(){if(null!=$(this)[0].className&&-1!=$(this)[0].className.indexOf("cc-section")){var e=getHighlightOrBriefIds($(this)[0].id);$("#chapter-section-list").find("[data-id='"+$(this)[0].id+"'] input").prop("checked")?e.length>0&&showNotesMargin(e):e.length>0&&hideNotesMargin(e)}}))}}if("pCase"==i||"C"==i)if($("#print-tab-section-container #"+n).hide(),o.length>0&&hideNotesMargin(o),-1==(h=noPrintSectionList.indexOf(n))&&noPrintSectionList.push(n),!$("#print-tab-section-container #"+n).parent().hasClass("cc-section"))"hide"==$("#print-tab-section-container #"+n).parent().css("display")&&($("#print-tab-section-container #"+n).parent().show(),$("#print-tab-section-container #"+n).parent().children().not(".cc-section").show())}showError()}var checkIfPrintWindowAppeared=!1;function printReadPlugin(){var e,t,n,i,o,r,s,c,a=$(".cc-nav-title").html(),l=(new Date).toJSON().slice(0,10).split("-"),p=(l[1],l[2],l[0],"Printed by "+localStorage.getItem("email")+" from CasebookConnect.com."),d=(r=navigator.appName,s=navigator.userAgent,(c=s.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i))&&null!=(o=s.match(/version\/([\.\d]+)/i))&&(c[2]=o[1]),c=c?[c[1],c[2]]:[r,navigator.appVersion,"-?"]),h=$.trim(d[0].toLowerCase());"chrome"==h||"safari"==h?(e=$(".modal-content #print-ereader-scroller #ereader-scroller").css("height"),t=$(".modal-content #print-ereader-scroller #ereader-scroller").css("max-height"),(n=$(".modal-content #print-ereader-scroller")).find("#ereader-scroller").removeAttr("style"),i=n.html()):i=$(".modal-content #print-ereader-scroller #ereader-scroller .ereader-content").html();var g=window.open(properties.ui_domain,properties.ui_domain,"");g.document.write('<!DOCTYPE html><html lang="en"><head><title>'+p+" - "+a+'</title><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta http-equiv="Cache-control" content="no-cache"/><meta http-equiv="Expires" content="-1"/><meta name="viewport" content="width=device-width, initial-scale=1" /><link href="css/epub.css" rel="stylesheet" type="text/css"/><link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"/><link href="css/ereader.css" rel="stylesheet" type="text/css"/></head>'),g.document.write('<body class="print-container-read" onLoad=this.print();this.close();>'),"firefox"==h&&g.document.write('<style>.print-container-read #tab-section-container,.print-container-read #note-container{display:block; overflow:visible;}.print-container-read .cc-pagenum-begin,.print-container-read #note-container a,.print-container-read #note-container a span,.print-container-read #note-container a div{display:block;}.print-container-read .cc-pagenum-begin{position:relative;left:100%;}@page:footer{content:"'+p+'";}</style>'),g.document.write(i),g.document.write("</body></html>"),"chrome"!=h&&"safari"!=h||(n.find("#ereader-scroller").css("height",e),n.find("#ereader-scroller").css("max-height",t)),g.document.close()}function previewPrintHighlights(e){var t=$("#print_highlights")[0].checked;if(!0===t){$("#print_highlights").prop("checked",!1),printHighlightChecked=!1;var n=$("highlight");loadPrintModalAfterResize()}else if(!1===t){$("#print_highlights").prop("checked",!0),printHighlightChecked=!0;n=$("#print-ereader-scroller highlight");for(var i=0;i<n.length;i++)for(var o=0;o<relatedHighLightTags.length;o++)if(-1!==n[i].id.indexOf("_")){var r=n[i].id.split("_")[0];if(relatedHighLightTags[o].id===r)$("#print-ereader-scroller highlight#"+n[i].id).attr("style","background-color:"+relatedHighLightTags[o].style.backgroundColor+"!important")}else if(relatedHighLightTags[o].id===n[i].id){$("#print-ereader-scroller highlight#"+n[i].id).attr("style","background-color:"+relatedHighLightTags[o].style.backgroundColor+"!important")}var s=$("#print-ereader-scroller briefsTag");for(i=0;i<s.length;i++)for(o=0;o<relatedBriefTags.length;o++)if(-1!==s[i].id.indexOf("_")){r=s[i].id.split("_")[0];if(relatedBriefTags[o].id===r)$("#print-ereader-scroller briefsTag#"+s[i].id).attr("style","background-color:"+relatedBriefTags[o].style.backgroundColor+"!important")}else if(relatedBriefTags[o].id===s[i].id){$("#print-ereader-scroller briefsTag#"+relatedBriefTags[i].id).attr("style","background-color:"+relatedBriefTags[o].style.backgroundColor+"!important")}loadPrintModalAfterResize()}showError(),$("#print-tab-section-container #links-container").remove(),e.preventDefault()}var printNoteChecked=!0,printHighlightChecked=!0;function previewPrintMarginNotes(e){var t=$("#print_notes_margin")[0].checked;!0===t?($("#print_notes_margin").prop("checked",!1),printNoteChecked=!1,$(".outlineDatainPrint").hide()):!1===t&&($("#print_notes_margin").prop("checked",!0),printNoteChecked=!0,$(".outlineDatainPrint").show()),showError(),$("#print-tab-section-container #links-container").remove(),e.preventDefault()}var closePrintClicked=!1;function closePrintModal(){if($("#read-print-modal").modal("hide"),closePrintClicked=!0,$(".modal-content #print-ereader-scroller #print-tab-section-container").html(""),$(".modal-content #print-ereader-scroller #print-notes-container").html(""),$("#tab-section-container").removeClass("print-tab-container"),$("#notes-container").removeClass("print-note-container"),$(".notesText").addClass("hidden-xs"),$(".labelNoteWrapper").addClass("hidden-xs"),$(".labelText").addClass("hidden-xs"),$(".briefNotesText").addClass("hidden-xs"),reCalculateNotesOnRight(),reCalculateBriefOnRight(),"textsize-default"!==currentFontId){var e;$("#page-loading-spinner").show(),currentFontId="textsize-default";var t="";t=".ereader-content",calculateFontSizeAndLineHeight(currentFontId),"ereader-textsize-default"===(e="ereader-"+e)&&$(t).removeAttr("id"),$("#tab-section-container").removeAttr("style"),$("#notes-container").show(),$("#page-loading-spinner").hide(),$(window).trigger("resize")}$(".print-fs button").css("border","none"),printHighlightChecked||(printHighlightChecked=!0,$(window).trigger("resize")),printNoteChecked||(printNoteChecked=!0,$("#tab-section-container").removeAttr("style"),$(" #notes-container").show(),reCalculateNotesOnRight(),reCalculateBriefOnRight()),$("ol.epub-parenlistlcletter li").removeClass("goToPageBug"),$("ol.epub-parenlistucletter li").removeClass("goToPageBug"),$("ol.epub-parenlistdecimal li").removeClass("goToPageBug"),$("ol.epub-bracketlistdecimal li").removeClass("goToPageBug"),$("ol.epub-ucletter li").removeClass("goToPageBug"),$("ol.epub-lcletter li").removeClass("goToPageBug"),$("ol.epub-ucroman li").removeClass("goToPageBug"),$("ol.epub-lcroman li").removeClass("goToPageBug"),$("ol.epub-decimal li").removeClass("goToPageBug"),$(".epub-law-heading-container").removeClass("goToPageBug"),$(".epub-law-heading-container .epub-law-case-marker").removeClass("goToPageBug"),ereaderPrintClicked=!1,noPrintSectionList=[]}var sectionItemForChapter=[];function getSectionListForPrint(){0!=$(".loadMsgPrint").length&&$(".loadMsgPrint").remove();$(".modal-content #print-ereader-scroller #print-tab-section-container .ereader-content").before('<div class="loadMsgPrint hidden-xs" style="font-size: 10pt;font-family: arial;font-weight: bold;color:#c22e3f;text-align: center;margin-top: 15px;">We’re loading your notes and highlights . . .</div>'),$("#page-loading-spinner").show();var e={userVO:{userId:CaseConnect.currentUserId,userRole:CaseConnect.currentUserRole,userRoleId:CaseConnect.currentUserRoleId,userActivityVO:{lastActivityCode:"EREADER_READING_BOOK",pageNavigatingFrom:"EReader",pageNavigatingTo:"EReader",lastReadBookId:CaseConnect.currentBookId,lastReadPageNum:CaseConnect.currentPageNumber,lastReadChapterId:CaseConnect.currentChapterId,lastReadSectionId:CaseConnect.currentSectionId,lastReadSubSectionId:"subsec01",lastReadParagraphId:"para01",lastViewedOutlineId:CaseConnect.lastViewedOutlineId},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")}},bookVO:{bookId:CaseConnect.currentBookId},chapterVO:{chapterId:CaseConnect.currentChapterId}};$.ajax({url:properties[properties.env]+"/manageBookService/getSectionListByChapterId",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(e)}).then(function(e){if(void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),"true"===e.status)if(void 0!==e.sectionVOList){for(i=0;i<e.sectionVOList.length;i++)if(e.sectionVOList[i].childSectionIdVOList&&"object"===jQuery.type(e.sectionVOList[i].childSectionIdVOList)){var t=[];t.push(e.sectionVOList[i].childSectionIdVOList),e.sectionVOList[i].childSectionIdVOList=t}loadSectionListInModal(e.sectionVOList),$("input.page-sec").prop("checked","true"),0!=$(".loadMsgPrint").length&&$(".loadMsgPrint").remove(),$("#page-loading-spinner").hide()}else 0!=$(".loadMsgPrint").length&&$(".loadMsgPrint").remove(),$("#page-loading-spinner").hide();sessionTimeOut()},function(e){sessionTimeOut(),sessionAuthFails(e),Utility.handleSessionAuthentication(e.responseJSON)?(0!=$(".loadMsgPrint").length&&$(".loadMsgPrint").remove(),$("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function loadSectionListInModal(e){var t=Handlebars.getTemplate("ereader-print-section-list")(e);$("#chapter-section-list").html(t)}function checkBriefOverNoteForOverlap(){var e=$(".overlapCheckClass");e.sort(function(e,t){return parseInt(e.style.top)>parseInt(t.style.top)?1:parseInt(e.style.top)<parseInt(t.style.top)?-1:0});for(var t=null,n=null,i=0,o=0,r=0,s=1;s<e.length;s++)if(t=e[s],n=e[s-1],i=parseInt(n.style.top)+n.offsetHeight,parseInt(t.style.top)+t.offsetHeight,r=parseInt(t.style.top),o=parseInt(n.style.top),(-1!==t.className.indexOf("notesText")&&-1!==n.className.indexOf("labelNoteWrapper")||-1!==n.className.indexOf("notesText")&&-1!==t.className.indexOf("labelNoteWrapper"))&&o<r&&i>r)if(-1!==n.className.indexOf("notesText"))$clamp(document.getElementById(n.id),{clamp:2});else{var c="notesDiv"+n.id.slice(12);$clamp(document.getElementById(c),{clamp:2})}}function getChapterOutineForPrint(){$("#page-loading-spinner").show();var e={userVO:{userId:CaseConnect.currentUserId,userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"EREADER_READING_BOOK",pageNavigatingFrom:"EReader",pageNavigatingTo:"EReader",lastReadBookId:CaseConnect.currentBookId,lastReadPageNum:CaseConnect.currentPageNumber,lastReadChapterId:CaseConnect.currentChapterId,lastReadSectionId:CaseConnect.currentSectionId,lastReadSubSectionId:"subsec01",lastReadParagraphId:"para01",lastViewedOutlineId:CaseConnect.lastViewedOutlineId},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")}},annotationVO:{bookId:CaseConnect.currentBookId,chapterId:"",ereaderNotesAndHighlightsPopoverFlowFlag:"true"},bookVO:{bookId:CaseConnect.currentBookId}};$.ajax({url:properties[properties.env]+"/manageOutlineService/getChapterOutline",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(e)}).then(function(e){if(e.sectionVOList){var t=Handlebars.getTemplate("annotationsInPrint")(e.sectionVOList);$(".outlineDatainPrint").html(t)}else $(".outlineDatainPrint").remove()},function(e){$("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)})}